using?System.Collections;
using?System.Collections.Generic;
using?UnityEngine;

public?class?script_3_21?:?MonoBehaviour?{
????//actor
????private?GameObject?hero;

????//keydown
????private?bool?keyUp;
????private?bool?keyDown;
????private?bool?keyLeft;
????private?bool?keyRight;

????//current?time
????private?float?time;

????private?float?fps?=?10;

????private?int?nowFram;

????//anim?array
????private?Object[]?animUp;
????private?Object[]?animDown;
????private?Object[]?animLeft;
????private?Object[]?animRight;
????private?Object[]?nowAnim;
????private?Object[]?backAnim;

????//?Use?this?for?initialization
????void?Start?()?{
????????hero?=?GameObject.Find?("hero");

????????animUp?=?Resources.LoadAll?("up");
????????animDown?=?Resources.LoadAll?("down");
????????animLeft?=?Resources.LoadAll?("left");
????????animRight?=?Resources.LoadAll?("right");
????????nowAnim?=?animDown;
????????backAnim?=?animDown;
????}

????void?OnGUI()
????{
????????keyUp?=?GUILayout.RepeatButton?("向上");
????????keyDown?=?GUILayout.RepeatButton?("向下");
????????keyLeft?=?GUILayout.RepeatButton?("向左");
????????keyRight?=?GUILayout.RepeatButton?("向右");
????}

????void?FixedUpdate(){
????????if?(keyUp)?{
????????????SetAnimation?(animUp);
????????????hero.transform.Translate?(-Vector3.forward?*?0.001f);
????????}
????????if?(keyDown)?{
????????????SetAnimation?(animDown);
????????????hero.transform.Translate?(Vector3.forward?*?0.01f);
????????}
????????if?(keyLeft)?{
????????????SetAnimation?(animLeft);
????????????hero.transform.Translate?(Vector3.right?*?0.01f);
????????}
????????if?(keyRight)?{
????????????SetAnimation?(animRight);
????????????hero.transform.Translate?(Vector3.left?*?0.01f);
????????}

????????DrawAnimation?(nowAnim);
????}
????//?Update?is?called?once?per?frame
????void?Update?()?{
????????
????}

????void?DrawAnimation(Object[]?tex){
????????//calculate?time
????????time?+=?Time.deltaTime;

????????//change?texture
????????if?(time?>=?1.0?/?fps)?{
????????????nowFram++;
????????????time?=?0;
????????????if?(nowFram?>=?tex.Length)?{
????????????????nowFram?=?0;
????????????}
????????}
????????hero.GetComponent<MeshRenderer>?().material.mainTexture?=?(Texture2D)tex?[nowFram];
????}

????void?SetAnimation(Object[]?tex){
????????nowAnim?=?tex;
????????if(!backAnim.Equals(nowAnim)){
????????????nowFram?=?0;
????????????backAnim?=?nowAnim;
????????}
????}
}